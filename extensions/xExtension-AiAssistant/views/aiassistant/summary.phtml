<div class="post content">
    <h1>Feed Summaries (Unread: <?php echo (int) $this->articleCount; ?>)</h1>
    <p><?php echo nl2br(htmlspecialchars($this->summaryText ?? "[Error: No summary available]", ENT_QUOTES)); ?></p>

    <?php if (!empty($this->articleIds)) { ?>
    <div id="article-data" data-article-ids='<?php echo htmlspecialchars(json_encode($this->articleIds), ENT_QUOTES, 'UTF-8'); ?>' data-mark-read='<?php echo htmlspecialchars(json_encode($this->markReadEnabled), ENT_QUOTES, 'UTF-8'); ?>'></div>
        <meta name="csrf-token" content="<?php echo FreshRSS_Auth::csrfToken(); ?>" />

        <?php if (!$this->markReadEnabled) { ?>
            <form method="post" action="?c=entry&a=read" onsubmit="this.querySelector('button').disabled=true;">
                <input type="hidden" name="_csrf" value="<?php echo FreshRSS_Auth::csrfToken(); ?>" />
                <input type="hidden" name="ajax" value="1" />
                <?php foreach ($this->articleIds as $id) { ?>
                    <input type="hidden" name="id[]" value="<?php echo (int)$id; ?>" />
                <?php } ?>
                <button type="submit" hidden>Mark All As Read</button>
            </form>
        <?php } ?>
    <?php } ?>

    <hr/>
    <p>
        <a class="btn" href="#" id="back-button">Back</a>
    </p>

    <script src="<?php echo Minz_Url::display('/ext.php?f=xExtension-AIAssistant/static/aiassistant.js&t=js'); ?>"></script>
</div>
<link rel="stylesheet" href="<?php echo Minz_Url::display('/ext.php?f=xExtension-AIAssistant/static/aiassistant.css&t=css'); ?>">
